(()=>{"use strict";var r={373:(e,t,r)=>{r.r(t)},692:(e,t,r)=>{r.r(t)},22:(e,t,r)=>{r.r(t)},443:(e,t,r)=>{r.r(t)},23:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(297)),o=r(79),u=r(76),i=r(377),l=n(r(876)),c=r(848),i={addRow:i.addRow};t.default=o.connect(function(e){return{matrix:e.matrix.matrix}},i)(function(e){var t=e.addRow,r=e.matrix;e=function(e){t(function(e,t){void 0===e&&(e=c.N);for(var r=[],n=0;n<e;n++){var a=Math.floor(1001*Math.random());r[n]={id:t+"x"+n,amount:a,bright:!1,part:!1}}return r}(r[0].length|c.N,r.length))};try{return r.length?a.default.createElement("div",{className:"container"},a.default.createElement(l.default,null),a.default.createElement(u.AddRow,{addRowHandle:e})):a.default.createElement("div",{className:"container"},a.default.createElement("h1",null,"Немає жодної стрічки!"),a.default.createElement(u.AddRow,{addRowHandle:e}))}catch(e){console.log(e.message)}})},793:function(e,t,r){var u=this&&this.__awaiter||function(e,u,i,l){return new(i=i||Promise)(function(r,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(n,a)}o((l=l.apply(e,u||[])).next())})},i=this&&this.__generator||function(r,n){var a,o,u,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(u=2&t[0]?o.return:t[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,t[1])).done)return u;switch(o=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,o=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(u=0<(u=i.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=n.call(r,i)}catch(e){t=[6,e],o=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(622)),l=n(r(297)),c=r(561),s=r(79),d=r(71),f=r(747),m=n(r(23)),p=r(333),v=r(226),t=n(r(605)),h=n(r(835)),n=n(r(826)),_=r(826).promises,r=process.env.PORT||4e3,a=[];function y(n,a){return void 0===a&&(a={}),u(this,void 0,void 0,function(){var t,r;return i(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=o.default.resolve("./dist/index.html"),[4,_.readFile(t)];case 1:return(r=(r=e.sent()).toString())?[2,r=r.replace('<div id="root"></div>','\n            <div id="root">'+n+"</div>\n            <script>\n                  window.__PRELOADED_STATE__ = "+JSON.stringify(a).replace(/</g,"\\u003c")+"\n            <\/script>           \n         ")]:[2,!1];case 2:return r=e.sent(),console.log(r),[3,3];case 3:return[2]}})})}n.default.readdirSync(o.default.resolve(__dirname,"../dist/assets/")).forEach(function(e){"js"===e.split(".").pop()&&a.push("/assets/"+e)}),console.log("jsFiles",a),t.default.createServer(function(e,t){if(/^\/\?rows=/.test(e.url)||/^\/$/.test(e.url))try{!function(a,o){u(this,void 0,void 0,function(){var t,r,n;return i(this,function(e){switch(e.label){case 0:return(n=h.default.parse(a.url,!0).query,r=n.rows,n=n.columns,parseInt(r)&&parseInt(n))?[3,2]:[4,y(f.renderToString(l.default.createElement(p.FormParamsMatrix,null)))];case 1:return t=e.sent(),[3,4];case 2:return r=v.getMatrix(+r,+n),n=c.createStore(d.rootReducer,{matrix:{matrix:r}}),[4,y(f.renderToString(l.default.createElement(s.Provider,{store:n},l.default.createElement(m.default,null))),r)];case 3:t=e.sent(),e.label=4;case 4:return t?o.end(t):o.end("No data"),[2]}})})}(e,t)}catch(e){t.end("Щось пішло не так!")}}).listen(r),console.log("http server running at port:"+r)},76:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddRow=void 0;var a=n(r(297));r(373);t.AddRow=function(e){e=e.addRowHandle;return a.default.createElement("div",{className:"addrRow-wrap"},a.default.createElement("button",{onClick:e},"Створити рядок"))}},486:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(297)),n=r(79),r={deleteRow:r(377).deleteRow};t.default=n.connect(null,r)(function(e){var t=e.footerClass,r=e.deleteRow,n=e.ind;return t?a.default.createElement(a.default.Fragment,null):a.default.createElement(a.default.Fragment,null,a.default.createElement("button",{onClick:function(e){r(n)}},"×"))})},333:function(e,t,r){var u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},i=this&&this.__awaiter||function(e,u,i,l){return new(i=i||Promise)(function(r,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(n,a)}o((l=l.apply(e,u||[])).next())})},l=this&&this.__generator||function(r,n){var a,o,u,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(u=2&t[0]?o.return:t[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,t[1])).done)return u;switch(o=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,o=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(u=0<(u=i.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=n.call(r,i)}catch(e){t=[6,e],o=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormParamsMatrix=void 0;var c=o(r(297));r(692);var s=r(45);t.FormParamsMatrix=function(){var e=c.useState({rows:"",columns:""}),r=e[0],n=e[1],t=c.useState(""),e=t[0],a=t[1],o=s.useHttp().request,t=function(e){var t;n(u(u({},r),((t={})[e.target.name]=e.target.value,t)))};return c.default.createElement("div",{className:"form_params"},c.default.createElement("div",null,e),c.default.createElement("div",{className:"input-field"},c.default.createElement("label",{htmlFor:"rows"},"Стрічки:"),c.default.createElement("input",{placeholder:"Введіть кількість стрічок",id:"rows",type:"text",name:"rows",value:r.rows,onChange:t})),c.default.createElement("div",{className:"input-field"},c.default.createElement("label",{htmlFor:"columns"},"Стовбці:"),c.default.createElement("input",{placeholder:"Введіть кількість стовпчиків",id:"columns",type:"text",name:"columns",value:r.columns,onChange:t})),c.default.createElement("button",{onClick:function(){return i(void 0,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,o("/?rows="+r.rows+"&columns="+r.columns,"GET")];case 1:return t=e.sent(),a(t.message),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})}},"Відправити параметри матриці"))}},876:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(297)),o=r(79),l=u(r(704));r(22);t.default=o.connect(function(e){return{matrix:e.matrix.matrix}},null)(function(e){var t=e.matrix,r=i.useState(),e=r[0],n=r[1];function a(e){for(var t=[],r=0;r<e.length;r++)t[r]=i.default.createElement(l.default,{key:r,arrRow:e[r],ind:r,footerClass:""});return t[e.length]=i.default.createElement(l.default,{key:e.length,ind:e.length,arrRow:function(e){for(var t=[],r=e.length||0,n=e[0].length||0,a=0;a<n;a++){for(var o=0,u=0;u<r;u++)o+=e[u][a].amount;t[a]={id:"footer"+a,amount:Math.ceil(o/r)}}return t}(e),footerClass:"footer"}),t}return i.useEffect(function(){n(a(t))},[t]),i.default.createElement("div",{className:"matrix-wrap"},i.default.createElement("div",{className:"matrix-content"},i.default.createElement("h4",null,"Matrix ",t.length,"x",t[0].length),i.default.createElement("div",{className:"matrix-header"},"Сума по рядку"),e))})},704:function(e,t,r){var p=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var v=n(r(297)),a=r(79),h=n(r(486)),n=r(377),_=r(848);r(443);n={increaseAmount:n.increaseAmount,mouseOverCeil:n.mouseOverCeil,mouseOut:n.mouseOut,mouseOverSum:n.mouseOverSum};t.default=a.connect(function(e){return{matrix:e.matrix.matrix}},n)(function(e){function r(e){var t;"f"!==e.target.dataset.id[0]&&(t=+e.currentTarget.dataset.id.split("x")[0],e=+e.currentTarget.dataset.id.split("x")[1],c(t,e))}function n(e){var t,n;"f"!==e.target.dataset.id[0]&&"s"!==e.target.dataset.id[0]&&(t=+e.target.dataset.id.split("x")[0],e=+e.target.dataset.id.split("x")[1],function(e,t,r){for(var n=[],a=0,o=0;o<e.length;o++)for(var u=0;u<e[o].length;u++)n[a]=Object.assign({},e[o][u]),a++;n.sort(function(e,t){return e.amount-t.amount});for(var i,l=+n.findIndex(function(e){return e.amount===t.amount}),c=l-Math.ceil(r/2),s=l+Math.ceil(r/2);c<0;)c++,s++;for(;s>=n.length;)c--,s--;return r%2&&((i=n[c].amount-n[l].amount)!=(r=n[l].amount-n[s].amount)&&r<i?c++:s--),p(p([],n.slice(c,l)),n.slice(1+l,s+1))}(n=o.concat(),n[t][e],_.X).forEach(function(e){var t=+e.id.split("x")[0],r=+e.id.split("x")[1];e.bright=!e.bright,n[t][r]=Object.assign({},e)}),s(n))}function t(e){e.target.dataset.ind&&(e=o.concat(),l<e.length&&e[l].forEach(function(e){e.part=!e.part}),d(e))}function a(e){var t=o.concat();n(e),t.forEach(function(e){e.forEach(function(e){return e.bright=!1})}),f(t)}var o=e.matrix,u=e.arrRow,i=e.footerClass,l=e.ind,c=e.increaseAmount,s=e.mouseOverCeil,d=e.mouseOverSum,f=e.mouseOut,m=u.reduce(function(e,t){return e+t.amount},0),e=u.map(function(e){var t={height:2*Math.round(100*e.amount/m)+"%"};return v.default.createElement("div",{key:e.id,className:"matrix-ceil "+(i||"")+" "+(e.bright?"bright":"")+" "+(e.part?"part":""),"data-part":Math.round(100*e.amount/m)+"%","data-id":e.id,onClick:r,onMouseDown:function(e){e.preventDefault()},onMouseOver:n,onMouseOut:a},e.part?v.default.createElement("div",null,Math.round(100*e.amount/m)+"%"):e.amount,v.default.createElement("div",{style:t}))});return v.default.createElement("div",{className:"matrix-row"},v.default.createElement("div",{className:"matrix-ceil sidebar-row"},v.default.createElement(h.default,{footerClass:i,ind:l})),e,v.default.createElement("div",{className:"matrix-ceil sum","data-id":"sum","data-ind":l,onMouseOver:t,onMouseOut:t},m))})},848:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.X=t.N=t.M=void 0,t.M=5,t.N=10,t.X=3},45:function(e,t,r){var c=this&&this.__awaiter||function(e,u,i,l){return new(i=i||Promise)(function(r,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(n,a)}o((l=l.apply(e,u||[])).next())})},s=this&&this.__generator||function(r,n){var a,o,u,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(u=2&t[0]?o.return:t[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,t[1])).done)return u;switch(o=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,o=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(u=0<(u=i.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){i.label=t[1];break}if(6===t[0]&&i.label<u[1]){i.label=u[1],u=t;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(t);break}u[2]&&i.ops.pop(),i.trys.pop();continue}t=n.call(r,i)}catch(e){t=[6,e],o=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHttp=void 0;var n=r(297);t.useHttp=function(){var e=n.useState(!1),t=e[0],i=e[1],r=n.useState(null),e=r[0],l=r[1];return{loading:t,request:n.useCallback(function(n,a,o,u){return void 0===a&&(a="GET"),void 0===o&&(o=null),void 0===u&&(u={}),c(void 0,void 0,void 0,function(){var t,r;return s(this,function(e){switch(e.label){case 0:i(!0),e.label=1;case 1:return e.trys.push([1,4,,5]),o&&(o=JSON.stringify(o),u["Content-Type"]="application/json"),[4,fetch(n,{method:a,body:o,headers:u})];case 2:return[4,(t=e.sent()).json()];case 3:if(r=e.sent(),!t.ok)throw new Error(r.message||"Дані з сервера не отримані ");return i(!1),[2,r];case 4:throw r=e.sent(),i(!1),l(r.message),r;case 5:return[2]}})})},[]),error:e,clearError:n.useCallback(function(){return l(null)},[])}}},377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mouseOverSum=t.mouseOut=t.mouseOverCeil=t.increaseAmount=t.deleteRow=t.addRow=void 0;var n=r(209);t.addRow=function(e){return{type:n.ADD_ROW,payload:e}},t.deleteRow=function(e){return{type:n.DELETE_ROW,payload:e}},t.increaseAmount=function(e,t){return{type:n.INCREASE_AMOUNT,payload:{row:e,column:t}}},t.mouseOverCeil=function(e){return{type:n.MOUSE_OVER_CEIL,payload:e}},t.mouseOut=function(e){return{type:n.MOUSE_OUT,payload:e}},t.mouseOverSum=function(e){return{type:n.MOUSE_OVER_SUM,payload:e}}},226:function(e,t,r){var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.matrixReducer=t.getMatrix=void 0;var s=r(209),r=r(848);function n(e,t){for(var r=[],n=0;n<e;n++)r[n]=function(e,t){for(var r=[],n=0;n<e;n++){var a=Math.floor(1001*Math.random());r[n]={id:t+"x"+n,amount:a,bright:!1,part:!1}}return r}(t,n);return r}var d={matrix:(t.getMatrix=n)(r.M,r.N)};t.matrixReducer=function(e,t){var r=(e=void 0===e?d:e).matrix.concat();switch(t.type){case s.ADD_ROW:return l(l({},e),{matrix:c(c([],e.matrix),[t.payload])});case s.DELETE_ROW:r.splice(t.payload,1);for(var n=t.payload;n<r.length;n++)for(var a=0;a<r[n].length;a++){var o=+r[n][a].id.split("x")[0];r[n][a].id=o-1+"x"+a}return l(l({},e),{matrix:c([],r)});case s.INCREASE_AMOUNT:var u=t.payload.row,i=t.payload.column;return r[u][i].amount=r[u][i].amount+1,l(l({},e),{matrix:c([],r)});case s.MOUSE_OVER_CEIL:case s.MOUSE_OUT:case s.MOUSE_OVER_SUM:return l(l({},e),{matrix:c([],t.payload)});default:return e}}},71:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rootReducer=void 0;var n=r(561),r=r(226);t.rootReducer=n.combineReducers({matrix:r.matrixReducer})},209:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MOUSE_OUT=t.MOUSE_OVER_SUM=t.MOUSE_OVER_CEIL=t.INCREASE_AMOUNT=t.DELETE_ROW=t.ADD_ROW=void 0,t.ADD_ROW="ADD_ROW",t.DELETE_ROW="DELETE_ROW",t.INCREASE_AMOUNT="INCREASE_AMOUNT",t.MOUSE_OVER_CEIL="MOUSE_OVER_CEIL",t.MOUSE_OVER_SUM="MOUSE_OVER_SUM",t.MOUSE_OUT="MOUSE_OUT"},826:e=>{e.exports=require("fs")},605:e=>{e.exports=require("http")},622:e=>{e.exports=require("path")},297:e=>{e.exports=require("react")},747:e=>{e.exports=require("react-dom/server")},79:e=>{e.exports=require("react-redux")},561:e=>{e.exports=require("redux")},835:e=>{e.exports=require("url")}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,a),t.exports}a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};a(793)})();